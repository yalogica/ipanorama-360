!function(t){"use strict";const i={data:{deactivationUrl:null,$feedback:null},fn:{show:a=>{i.globals=ipanorama_feedback_globals,i.data.deactivationUrl=a,i.data.$feedback=t("#ipanorama-feedback"),i.data.$feedback.addClass("ipanorama-active").css("display",""),i.data.$feedback.find(".ipanorama-fields").off().on("click","input[type=radio]",i.fn.select),i.data.$feedback.find(".ipanorama-close").off().on("click",i.fn.close),i.data.$feedback.find(".ipanorama-btn.ipanorama-submit").off().on("click",i.fn.submit),i.data.$feedback.find(".ipanorama-btn.ipanorama-skip").off().on("click",i.fn.skip)},select:a=>{a=t(a.target);i.data.$feedback.find(".ipanorama-fields input[type=text]").removeClass("ipanorama-active"),a.closest(".ipanorama-field").find("input[type=text]").addClass("ipanorama-active")},close:()=>{i.data.$feedback.removeClass("ipanorama-active")},deactivate:()=>{i.fn.close(),window.location.href=i.data.deactivationUrl,t(document).off("click","tr[data-slug*='ipanorama']")},skip:()=>{i.fn.deactivate()},submit:()=>{var a,e=i.data.$feedback.find(".ipanorama-fields input[type=radio]:checked");e.length?(a=(a=e.closest(".ipanorama-field").find("input[type=text]")).length?a.val():"",e=e.val(),e=JSON.stringify({token:i.globals.token,reason:e,description:a}),t.ajax({url:i.globals.ajax.url,type:"POST",dataType:"json",contentType:"application/json",data:e}).always(()=>{i.fn.deactivate()})):i.fn.deactivate()}}};t(document).on("click","tr[data-slug*='ipanorama'] span.deactivate",a=>{a.preventDefault(),i.fn.show(a.target.href)})}(jQuery);